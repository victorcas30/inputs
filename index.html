<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camara con Carrete</title>
</head>
<body>

<!-- Contenedor para la cámara y el carrete -->
<div id="cameraContainer">
    <video id="cameraView" autoplay></video>
    <input type="file" accept="image/*" id="inputGallery" style="display: none;" onchange="loadImageFromGallery()">
    <label for="inputGallery" id="galleryLabel">Carrete</label>
    <button onclick="toggleCamera()">Alternar</button>
</div>

<script>
let usingCamera = true;

// Acceder a la cámara
async function openCamera() {
    try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        const videoElement = document.getElementById('cameraView');
        videoElement.srcObject = stream;
    } catch (error) {
        console.error('Error al acceder a la cámara: ', error);
    }
}

// Cargar imagen seleccionada del carrete
function loadImageFromGallery() {
    const inputGallery = document.getElementById('inputGallery');
    const file = inputGallery.files[0];

    if (file) {
        const reader = new FileReader();

        reader.onload = function (e) {
            const videoElement = document.getElementById('cameraView');
            videoElement.src = e.target.result;
            inputGallery.value = ''; // Limpiar la selección para permitir cargar la misma imagen nuevamente
            toggleCamera(); // Volver a la cámara después de cargar una imagen
        };

        reader.readAsDataURL(file);
    }
}

// Alternar entre cámara y carrete
function toggleCamera() {
    const cameraView = document.getElementById('cameraView');
    const inputGallery = document.getElementById('inputGallery');
    const galleryLabel = document.getElementById('galleryLabel');

    if (usingCamera) {
        cameraView.style.display = 'none';
        inputGallery.style.display = 'initial';
        galleryLabel.textContent = 'Cámara';
        usingCamera = false;
    } else {
        cameraView.style.display = 'initial';
        inputGallery.style.display = 'none';
        galleryLabel.textContent = 'Carrete';
        usingCamera = true;
    }
}

// Abrir la cámara al cargar la página
window.onload = function () {
    openCamera();
};
</script>

</body>
</html>
